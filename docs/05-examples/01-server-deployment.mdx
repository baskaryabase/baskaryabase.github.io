---
title: Server deployment
---

:::info
The example here is for deploying kubesense in a <strong>16vCPU</strong> & <strong>32Gi</strong> memory node\
with node <strong>*taint*</strong> as <strong>app: kubesense</strong>\
with node <strong>*label*</strong> as <strong>app: kubesense</strong>
:::

## Custom Values
create a values-file named `kubesense-values.yaml` with the following content
```
global:
  deploymentType: "server"
  cluster_name: example-prod
  dashboardHostName: example.kubesense.ai
  nodeAffinityLabelSelector:
    - matchExpressions:
        - key: app
          operator: In
          values: kubesense
  tolerations:
    - key: "app"
      operator: "Equal"
      value: "kubesense"
      effect: "NoSchedule"
  ignoreLogsNamespace: 
    - logs-not-needed # ignoring logs on any particular namespace

aggregator:
  resources:
    limits:
      cpu: 2000m
      memory: 4096Mi
    requests:
      cpu: 1500m
      memory: 2048Mi

kubecol:
  resources:
    limits:
      cpu: 2000m
      memory: 6144Mi
    requests:
      cpu: 1500m
      memory: 4096Mi

clickhouse:
  resources:
    limits:
      cpu: 8000m
      memory: 16384Mi
    requests:
      cpu: 6000m
      memory: 12288Mi

mysql:
  resources:
    limits:
      cpu: 1000m
      memory: 2048Mi
    requests:
      cpu: 750m
      memory: 1024Mi

victoria-metrics-single:
  server:
    retentionPeriod: 15d # retentionPeriod for metrics
  resources:
    limits:
      cpu: 1000m
      memory: 1024Mi
    requests:
      cpu: 750m
      memory: 768Mi

victoria-metrics-agent:
  resources:
    limits:
      cpu: 1000m
      memory: 1024Mi
    requests:
      cpu: 750m
      memory: 768Mi
```

## Commands
### Adding kubesense Helm repository to the host
```
helm repo add kubesense https://helm.kubesense.ai
helm repo update kubesense
```

### Helm installation/upgrade Command
```
helm upgrade -i kubesense kubesense/kubesense --create-namespace -n kubesense -f kubesense-values.yaml
```
